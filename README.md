# Тестовое задание на позицию "Инженер по искусственному интеллекту" в IT компанию Lad

## Преамбула
Необходимо реализовать расчет длительностей и времени начала и завершения задач в системе планирования, 
учитывая следующие особенности логики расчета

1. **РД** (Рабочие дни) - календарные даты, в которые по ранее известному расписанию (календарю) будет производиться 
выполнение работы.
2. **ДРД** (длительность в рабочих днях) - количество рабочих дней, требуемое для выполнения работы.
3. **ДКД** (длительность в календарных днях) - длина календарного периода (в днях) между заданной или рассчитанной 
датой начала и датой окончания выполнения работы. 
4. **Приоритет длительности** - признак, описывающий, какая из длительностей работы (ДКД или ДРД) останется неизменной 
при перерасчете, связанном с изменением периода работы, обусловленный характером каждой конкретной работы, 
известным пользователю
5. **Календарь работы** - сведения о том, какие объемы рабочего времени соответствуют календарным датам при выполнении 
указанной работы. Назначение календаря на работу осуществляется присвоением конкретной работе конкретного 
календаря из базы.
6. **Действующая связь** - связь, определяющая одну из дат работы - дату начала либо дату окончания.

Исходим из того, что большинство работ может выполняться только по рабочим дням. Для того чтобы понять, какие дни 
являются рабочими, а какие нерабочими, используется “Календарь работы”. В системе календари работ хранятся в также 
в базе `neo4j`. 

Требуемый календарь присваивается работе в процессе редактирования графика (по описанным ниже правилам).

Имея информацию о:
* Необходимом количестве “рабочих дней” на выполнение работы (т.е длительности работы в рабочих днях), указанную 
в характеристиках самой работы.
* Том, какие из календарных дат за определенный период являются рабочими и нерабочими днями, 
указанными в календаре работы.

**Можно реализовать пересчет календарной длительности работы в длительность её в рабочих днях и обратно.**

1. Следовательно, приоритетным считается режим, когда пользователь знает количество рабочих дней, требуемое для выполнения
работы, а календарная длительность работы является расчетной. Из этого следует, что календарная длительность работы 
может изменяться при смещении работы с сохранением её длительности в рабочих днях в зависимости от количества нерабочих
дней в календарном периоде.

2. Стоит иметь в виду, что некоторые работы обладают фиксированной календарной длительностью, что может быть вызвано
естественными условиями и не зависеть от рабочего календаря. В таком случае длительность работы, измеренная в рабочих
днях, будет изменяться при смещении работы с сохранением её длительности в календарных днях в зависимости от количества
нерабочих дней в календарном периоде.

Таким образом пользователь заранее знает, какая длительность работы (ДКД или ДРД) является приоритетной (т.е. останется
неизменной) при перерасчете, связанном с изменением периода работы.

Данные, необходимые для функционирования сервиса:
1. Массив календарей 
   * id календаря
   * Дата
   * рабочий/не рабочий

2. Массив работ
   * Id работы
   * id календаря
   * ВариантРасчетаДлительности
   * Длительность в часах
   * Длительность в рабочих днях
   * Длительность в календарных днях
   * Дата начала
   * Дата окончания

3. Массив действующих связей
   * idРаботаНач
   * idРаботаКон
   * Вид связи (входящая/исходящая)
   * тип связи (6 типов)
   * смещение

В сервисе могут создаваться группы и работы. группы не имеют собственной длительности, они начинаются с началом 
наименьшей даты из входящих работ и заканчиваются с наибольшей датой.

Связи между работами влияют на задачи в соответствии с логикой 
[MS Project](https://intuit.ru/studies/professional_retraining/965/courses/352/lecture/8391?page=3)

## Задание.
1. В системе необходимо создать календарь, с узлами, которые содержат информацию о дате и о том, является ли этот день 
рабочим. Используем производственный календарь текущего года.
2. Необходимо создать группу “Группа 1” и сохранить ее в БД в виде узла графа (используем python и cypher).
3. Необходимо создать подгруппу “Подгруппа 1.1” и сохранить ее в БД в виде узла графа с указанием связи с группой 1.
4. Необходимо создать работу “Работа 1.1.1”, которая начинается 1.08.23, заканчивается 10.08.23 и имеет длительность 
8 рабочих дней. в виде узла графа с указанием связи с подгруппой 1.1.
После создания работы сроки начала и завершения группы и подгруппы должны пересчитаться и соответствовать работе.
5. Необходимо создать работу “Работа 1.1.2”, которая начинается 5.08.23, заканчивается 14.08.23 и имеет длительность 10
календарных дней. в виде узла графа с указанием связи с подгруппой 1.1.
После создания работы сроки начала и завершения группы и подгруппы должны пересчитаться и стать с 01.08.23 по 14.08.23.
Расчитать для группы длительность в календарных и рабочих днях
6. Необходимо создать работу 1.2, входящую в группу 1, но не в подгруппу 1.1 Указать ей длительность 3 рабочих дня.
Создать связи от работ 1.1.1 и 1.1.2 типа Окончание- Начало, у связи от работы 1.1.2 будет смещение старта на 5
календарных дней.
После создания работы ее даты начала и завершения должны пересчитаться, на 20.08.23 и 24.08.23 соответственно. сроки
начала и завершения группы 1 должны пересчитаться и стать с 01.08.23 по 24.08.23. У группы 1.1. не измениться.
Рассчитать для группы 1 длительность в календарных и рабочих днях

Подсказка. В текущей версии проекта календарь построен как граф со связями между последовательными датами, поиск 
длительности осуществляется через алгоритмы обхода графа. Можно реализовать таким же образом.

Задание под звездочкой - предложить альтернативу.